<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>¬°A Cepillarse!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(135deg, #b2ebf2, #81d4fa);
      margin: 0;
      padding: 20px;
      text-align: center;
      color: #01579b;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }

    #instruction {
      font-size: 1.8em;
      margin-top: 20px;
      min-height: 100px;
      padding: 20px;
      border-radius: 15px;
      background: #ffffffaa;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .btn {
      padding: 20px 30px;
      margin: 10px;
      font-size: 1.2em;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .btn:hover {
      transform: scale(1.05);
    }

    #startButton {
      background: #4caf50;
      color: white;
    }

    #pauseButton {
      background: #ff9800;
      color: white;
    }

    #pauseButton:disabled,
    #startButton:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    #countdown {
      font-size: 2.5em;
      margin-top: 10px;
      color: #d32f2f;
      display: none;
    }

    #foam-effect {
      width: 100px;
      height: 100px;
      margin: 20px auto;
      display: none;
      background: radial-gradient(circle at center, #ffffff88, #81d4fa88);
      border-radius: 50%;
      animation: bubble 1.2s infinite ease-in-out;
    }

    @keyframes bubble {
      0%, 100% {
        transform: scale(1);
        opacity: 0.9;
      }
      50% {
        transform: scale(1.3);
        opacity: 1;
      }
    }

    #progress {
      font-size: 1.5em;
      margin-top: 20px;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    @media screen and (max-width: 600px) {
      #instruction {
        font-size: 1.5em;
      }
      .btn {
        font-size: 1em;
        padding: 15px 20px;
      }
      #countdown {
        font-size: 2em;
      }
      #progress {
        font-size: 1.2em;
      }
    }
  </style>
</head>
<body>

  <h1>ü¶∑ ¬°A Cepillarse los Dientes!</h1>
  <button id="startButton" class="btn">üü¢ Comenzar</button>
  <button id="pauseButton" class="btn" disabled>‚è∏Ô∏è Pausar</button>
  <div id="instruction">¬°Presiona comenzar para empezar!</div>
  <div id="countdown">9</div>
  <div id="foam-effect"></div>
  <div id="progress"></div>

  <audio id="bell" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3" preload="auto"></audio>

  <script>
    const zonas = [
      "superior derecha por fuera",
      "superior derecha que muerde",
      "superior derecha por dentro",
      "superior al frente por fuera",
      "superior al frente que muerde",
      "superior al frente por dentro",
      "superior izquierda por fuera",
      "superior izquierda que muerde",
      "superior izquierda por dentro",
      "inferior derecha por fuera",
      "inferior derecha que muerde",
      "inferior derecha por dentro",
      "inferior al frente por fuera",
      "inferior al frente que muerde",
      "inferior al frente por dentro",
      "inferior izquierda por fuera",
      "inferior izquierda que muerde",
      "inferior izquierda por dentro"
    ];

    const frasesTransicion = [
      "Pasemos a la otra cara.",
      "Vamos con la siguiente zona.",
      "Continuemos cepillando.",
      "Sigamos con el pr√≥ximo sector.",
      "¬°Siguiente parte!",
      "Vamos con otra zona m√°s.",
      "Ahora avancemos un poco m√°s.",
      "Ya casi terminamos, sigamos.",
      "No te detengas, falta poco.",
      "¬°Continuamos!",
      "Avancemos un poco m√°s.",
      "¬°M√°s limpieza!",
      "Otra m√°s y seguimos.",
      "Vamos a por otra cara.",
      "Dale que viene la pr√≥xima.",
      "Siguiente parte de la boca.",
      "Zona nueva, vamos.",
      "Y ahora, lo que sigue."
    ];

    const duracionZona = 11;
    const bell = document.getElementById('bell');
    const instruction = document.getElementById('instruction');
    const startButton = document.getElementById('startButton');
    const pauseButton = document.getElementById('pauseButton');
    const countdown = document.getElementById('countdown');
    const foamEffect = document.getElementById('foam-effect');
    const progress = document.getElementById('progress');

    let index = 0;
    let enPausa = false;
    let intervaloContador = null;

    function renderProgress() {
      let completados = '‚úÖ'.repeat(index);
      let actual = index < zonas.length ? 'üü®' : '';
      let restantes = '‚¨ú'.repeat(zonas.length - index - 1);
      progress.textContent = `Zona ${index + 1}/${zonas.length} ${completados}${actual}${restantes}`;
    }

    function hablar(texto, callback) {
      const mensaje = new SpeechSynthesisUtterance(texto);
      mensaje.lang = 'es-ES';
      mensaje.rate = 0.85;
      mensaje.pitch = 1.1;
      speechSynthesis.cancel();
      if (callback) mensaje.onend = callback;
      speechSynthesis.speak(mensaje);
    }

    function iniciarZona() {
      if (index >= zonas.length) {
        instruction.textContent = "üéâ ¬°Cepillado completo! ¬°Muy bien!";
        foamEffect.style.display = 'none';
        renderProgress();
        hablar("Cepillado completo. ¬°Felicitaciones!");
        startButton.disabled = false;
        pauseButton.disabled = true;
        return;
      }

      renderProgress();
      foamEffect.style.display = 'block';

      const texto = index === 0
        ? `Vamos a comenzar con el cepillado. Empecemos por ${zonas[index]}`
        : `${frasesTransicion[index % frasesTransicion.length]} ${zonas[index]}`;

      instruction.textContent = texto;
      hablar(texto, iniciarContador);
    }

    function iniciarContador() {
      let tiempoRestante = duracionZona;
      countdown.style.display = 'block';
      countdown.textContent = tiempoRestante;

      intervaloContador = setInterval(() => {
        if (enPausa) return;
        tiempoRestante--;
        countdown.textContent = tiempoRestante;

        if (tiempoRestante <= 0) {
          clearInterval(intervaloContador);
          countdown.style.display = 'none';
          foamEffect.style.display = 'none';
          bell.play();
          setTimeout(() => {
            index++;
            iniciarZona();
          }, 1500);
        }
      }, 1000);
    }

    startButton.addEventListener('click', () => {
      startButton.disabled = true;
      pauseButton.disabled = false;
      index = 0;
      enPausa = false;
      iniciarZona();
    });

    pauseButton.addEventListener('click', () => {
      enPausa = !enPausa;
      pauseButton.textContent = enPausa ? "‚ñ∂Ô∏è Reanudar" : "‚è∏Ô∏è Pausar";
    });
  </script>
</body>
</html>
